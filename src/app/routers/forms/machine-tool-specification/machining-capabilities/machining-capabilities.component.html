<div [formGroup]="machiningCapabilitiesForm">
  <div formArrayName="capabilities">
    <div *ngFor="let a of machiningCapabilitiesForm.controls['capabilities'].controls; let i=index">

      <inz-card [cardName]="'Machining Capability #' + (1+i)" class="form-array-item">
        <div [formGroupName]="i">
          <div class="form-group row">
            <label for="capability" class="col-sm-2 col-form-label require">Capability</label>
            <div class="col-sm-10">
              <select formControlName="capability" id="capability" class="form-control custom-select">
                <option *ngFor="let item of machiningCapabilityProfile | keys" [value]="item.key">
                  {{item.value}}
                </option>
              </select>
            </div>
          </div>

          <div class="form-group row">
            <label for="machining_accuracy" class="col-sm-2 col-form-label">Machining Accuracy</label>
            <div class="col-sm-10">
              <input formControlName="machining_accuracy" id="machining_accuracy" class="form-control"/>
            </div>
          </div>

          <div class="form-group row">
            <label for="description" class="col-sm-2 col-form-label">Description</label>
            <div class="col-sm-10">
              <input formControlName="description" id="description" class="form-control"/>
            </div>
          </div>
        </div>

        <div class="text-right">
          <button class="btn btn-danger" (click)="removeCapability(i)">Remove capability</button>
        </div>
      </inz-card>

    </div>
  </div>
</div>

<div class="text-left">
  <span class="text-primary" (click)="addCapability()">Add new capability +</span>
</div>

<div class="text-center">
  <button class="btn btn-primary" (click)="saveAll()">Save all</button>
</div>

<pre>
  {{machiningCapabilitiesForm.value | json}}
</pre>

